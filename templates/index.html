{% extends "base.html" %}
{% block title %}Buscador MinMinas{% endblock %}

{% block content %}
<div class="row gy-4 align-items-start hero-section">
  <div class="col-lg-7">
    <div class="hero-card">
      <span class="badge-score mb-2">Beta 路 2025</span>
      <h1 class="hero-title">
        Normatividad minera y energ茅tica, buscada como en 2025.
      </h1>
      <p class="hero-text">
        Escribe palabras clave relacionadas con la norma que deseas consultar.
        El buscador combina Big Data, Elasticsearch y MongoDB Atlas para
        entregarte resultados relevantes del marco regulatorio del sector
        minero-energ茅tico.
      </p>
      <ul class="hero-list">
        <li>B煤squeda por tema, entidad, a帽o o tipo de norma.</li>
        <li>Priorizaci贸n por relevancia (score de Elasticsearch).</li>
        <li>Base lista para anal铆tica avanzada y modelos de recomendaci贸n.</li>
      </ul>
    </div>
  </div>

  <div class="col-lg-5">
    <div class="search-panel">
      <form
        method="get"
        action="{{ url_for('home') }}"
        class="d-flex flex-column gap-3"
      >
        <div>
          <div class="search-label">Escribe una o varias palabras clave</div>
          <input
            type="text"
            class="form-control form-control-lg"
            name="q"
            placeholder="regal铆as, licencias ambientales, transici贸n energ茅tica..."
            value="{{ q }}"
          />
        </div>

        <div class="d-flex justify-content-between align-items-center">
          {% if q %}
          <small class="text-muted">
            Resultados para:
            <strong>"{{ q }}"</strong> 路 {{ total }} documento(s)
          </small>
          {% else %}
          <small class="text-muted">
            Ejemplo: "regal铆as", "p贸lizas mineras", "transici贸n energ茅tica".
          </small>
          {% endif %}
          <button class="btn btn-primary search-btn" type="submit">
             Buscar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

{% if resultados %}
<section class="results-section">
  <div class="results-grid">
    {% for r in resultados %}
    <article class="result-card">
      <h2 class="result-title">{{ r.titulo }}</h2>
      <dl class="result-meta">
        <div>
          <dt>Entidad</dt>
          <dd>{{ r.entidad }}</dd>
        </div>
        <div>
          <dt>A帽o</dt>
          <dd>{{ r.anio }}</dd>
        </div>
        <div>
          <dt>Tipo</dt>
          <dd>{{ r.tipo }}</dd>
        </div>
        <div>
          <dt>score</dt>
          <dd>{{ r.score }}</dd>
        </div>
      </dl>
    </article>
    {% endfor %}
  </div>
</section>
{% elif q %}
<p class="mt-4 text-muted">
  No se encontraron resultados para "<strong>{{ q }}</strong>".
</p>
{% endif %} {% endblock %}
