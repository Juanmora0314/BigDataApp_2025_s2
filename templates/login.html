{% extends "base.html" %}

{% block title %}Iniciar sesión · MinMinas Big Data{% endblock %}

{% block content %}
<main class="container py-5">

  <section class="row justify-content-center">
    <div class="col-lg-8 col-xl-7">
      <div class="card shadow-sm border-0">
        <div class="card-body p-4 p-md-5">

          <h1 class="h2 fw-semibold text-center mb-1">Iniciar sesión</h1>
          <p class="text-muted text-center mb-4">
            Accede al panel de administración y al buscador avanzado de
            normatividad del Ministerio de Minas y Energía.
          </p>

          <!-- Formulario de login -->
          <form method="post" action="{{ url_for('login') }}" class="mb-3">
            <div class="mb-3">
              <label for="username" class="form-label">Usuario o correo</label>
              <input type="text"
                     class="form-control form-control-lg"
                     id="username"
                     name="username"
                     placeholder="juan.mora / juan@example.com"
                     required>
            </div>

            <div class="mb-3">
              <label for="password" class="form-label">Contraseña</label>
              <input type="password"
                     class="form-control form-control-lg"
                     id="password"
                     name="password"
                     required>
              <div class="form-text">
                Tus credenciales se procesan de forma segura.
              </div>
            </div>

            {% if error %}
              <div class="alert alert-danger py-2 small">
                {{ error }}
              </div>
            {% endif %}

            <div class="d-grid gap-2 d-md-flex justify-content-md-between mt-4">
              <button type="submit" class="btn btn-primary btn-lg px-5">
                Ingresar
              </button>

              <!-- YA NO LLAMA A url_for('panel_usuarios') -->
              <a href="#tabla-usuarios"
                 class="btn btn-outline-secondary btn-lg">
                Ver usuarios registrados
              </a>
            </div>
          </form>

        </div>
      </div>
    </div>
  </section>

  <!-- Tabla de usuarios “demo” -->
  <section class="mt-5">
    <h2 class="h4 mb-3 text-center">Usuarios registrados</h2>

    <div class="table-responsive">
      <table id="tabla-usuarios"
             class="table align-middle table-hover shadow-sm bg-white rounded-3">
        <thead class="table-light">
          <tr>
            <th>Usuario</th>
            <th>Correo</th>
            <th>Rol</th>
            <th>Activo</th>
            <th>Último acceso</th>
          </tr>
        </thead>
        <tbody>
          <!-- Filas de ejemplo / se pueden reemplazar por datos reales -->
          <tr>
            <td>prueba1</td>
            <td>prueba1@example.com</td>
            <td>Admin</td>
            <td><span class="badge bg-success">Sí</span></td>
            <td>—</td>
          </tr>
          <tr>
            <td>usuario.prueba</td>
            <td>usuario.prueba@example.com</td>
            <td>Consulta</td>
            <td><span class="badge bg-secondary">No</span></td>
            <td>—</td>
          </tr>
          <tr>
            <td>prueba2</td>
            <td>prueba2@example.com</td>
            <td>Admin</td>
            <td><span class="badge bg-success">Sí</span></td>
            <td>—</td>
          </tr>
        </tbody>
      </table>
    </div>

    <p class="text-muted small text-center mt-2">
      * Esta tabla es solo informativa para el administrador.
    </p>
  </section>

</main>
{% endblock %}
